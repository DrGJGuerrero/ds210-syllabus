<html>
  <body>

<div class="wrapper">
  <div id="text"></div>
  <div class="buttons">
    <button id="play">Play</button>
    <button id="pause" disabled>Pause</button>
    <button id="stop" disabled>Stop</button>
  </div>
</div>
  <style>
*, *::before, *::after {
  box-sizing: border-box;
}

body {

}

.wrapper {
  width: 800px;
  max-width: calc(100vw - 40px);

}

#text {
  display: block;
  line-height: 1.75;
  font-size: 20;
  font-family: arial;
}

mark {
  color: #000;
}

.buttons {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  justify-content: center;
  gap: 10px;
  margin-top: 30px;
  padding-top: 30px;
  border-top: 1px solid #fff3;
}

button {
  padding: 5px;
  border: 1px solid #fff;
  border-radius: 999px;
  color: #fff;
  background-color: #0009;
  font-size: inherit;
  font-family: inherit;
  cursor: pointer;
  appearance: none;
}

button:disabled {
  opacity: 0.25;
  cursor: not-allowed;
} 
    </style>
  <script>
    const text = "Schedule.  Class Location: Dinneen Hall, G-27 Term Dates: Wednesday, August 27 – Wednesday, December 10, 2025 (16 weeks) Class Times: Monday, Wednesday, Thursday at 11:00am–11:50am (42 class sessions) Weekly: Interdisciplinary Consultation with Professionals in the Industry UNIVERSITY WIDE Final Exam Schedule (https://www.saintpeters.edu/enrollment-services/records-and-registration/final-exam-schedule/ | Week 1 |  08.26      | WELCOME!! Code of Ethics in Data Science the Jesuit Way|| Week 2 |  09.02    | Multi-disciplinary Data Scientist thru an Equity Lens || Week 3 |  09.08    | Data Analysis Life Cycle and AI's Role|| Week 4 |  09.15   | Database Meaning and Interconnectedness in All Things || Week 5 |  09.22   | Decision Modeling and Discernment || Week 6 |  09.29   | R Analytics and Criminal Justice || Week 7 |  10.06      | R "Square" and Human Communication|| Week 8 |  10.13     | Data Python and Midterm Exam|| Week 9 |  10.22     | Python in Natural Language Processing|| Week 10 |  10.27     | AI and  Cultural Analytics|| Week 11 |  11.03     | Data Visualization and Business Intelligence || Week 12 |  11.10    | Data Storytelling and Sustainability|| Week 13 |  11.17    | Machine Learning and Marginalized Communities || Week 14 |  11.24    | Term Group Project: Echos of Insight Podcast || Week 15 |  12.01     | CELEBRATION!! Term Group Project Presentation || Week 16 |  12.08     | Final Exam Overview || Week 17 |  12.17     | FINAL EXAM - Mock Job Interview (12:00pm - 2:30pm)|Chat Hours: Monday 10:00am – 10:50am Wednesday 4:00pm - 6:00pm Thursday 2:00pm – 4:00pm Book a Time to Chat(https://calendar.app.google/apFGmgQ2Ah4dPi8K7)Office Location: Dinneen Hall, G-11 E-mail:gguerrero@saintpeters.edu"

// grab the UI elements to work with
const textEl = document.getElementById('text');
const playEl = document.getElementById('play');
const pauseEl = document.getElementById('pause');
const stopEl = document.getElementById('stop');

// add UI event handlers
playEl.addEventListener('click', play);
pauseEl.addEventListener('click', pause);
stopEl.addEventListener('click', stop);

// set text
textEl.innerHTML = text;

function play() {
  if (window.speechSynthesis.speaking) {
    // there's an unfinished utterance
    window.speechSynthesis.resume();
  } else {
    // start new utterance
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.addEventListener('start', handleStart);
    utterance.addEventListener('pause', handlePause);
    utterance.addEventListener('resume', handleResume);
    utterance.addEventListener('end', handleEnd);
    utterance.addEventListener('boundary', handleBoundary);
    window.speechSynthesis.speak(utterance);
  }
}

function pause() {
  window.speechSynthesis.pause();
}

function stop() {
  window.speechSynthesis.cancel();
  
  // Safari doesn't fire the 'end' event when cancelling, so call handler manually
  handleEnd();
}

function handleStart() {
  playEl.disabled = true;
  pauseEl.disabled = false;
  stopEl.disabled = false;
}

function handlePause() {
  playEl.disabled = false;
  pauseEl.disabled = true;
  stopEl.disabled = false;
}

function handleResume() {
  playEl.disabled = true;
  pauseEl.disabled = false;
  stopEl.disabled = false;
}

function handleEnd() {
  playEl.disabled = false;
  pauseEl.disabled = true;
  stopEl.disabled = true;
  
  // reset text to remove mark
  textEl.innerHTML = text;
}

function handleBoundary(event) {
  if (event.name === 'sentence') {
    // we only care about word boundaries
    return;
  }

  const wordStart = event.charIndex;

  let wordLength = event.charLength;
  if (wordLength === undefined) {
    // Safari doesn't provide charLength, so fall back to a regex to find the current word and its length (probably misses some edge cases, but good enough for this demo)
    const match = text.substring(wordStart).match(/^[a-z\d']*/i);
    wordLength = match[0].length;
  }
  
  // wrap word in <mark> tag
  const wordEnd = wordStart + wordLength;
  const word = text.substring(wordStart, wordEnd);
  const markedText = text.substring(0, wordStart) + '<mark>' + word + '</mark>' + text.substring(wordEnd);
  textEl.innerHTML = markedText;
}
  </script>
</body>
</html>


