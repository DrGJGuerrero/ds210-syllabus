<html>
  <body>

<div class="wrapper">
  <div id="text"></div>
  <div class="buttons">
    <button id="play">Play</button>
    <button id="pause" disabled>Pause</button>
    <button id="stop" disabled>Stop</button>
  </div>
</div>
  <style>
*, *::before, *::after {
  box-sizing: border-box;
}

body {

}

.wrapper {
  width: 800px;
  max-width: calc(100vw - 40px);

}

#text {
  display: block;
  line-height: 1.75;
  font-size: 20;
  font-family: arial;
}

mark {
  color: #000;
}

.buttons {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  justify-content: center;
  gap: 10px;
  margin-top: 30px;
  padding-top: 30px;
  border-top: 1px solid #fff3;
}

button {
  padding: 5px;
  border: 1px solid #fff;
  border-radius: 999px;
  color: #fff;
  background-color: #0009;
  font-size: inherit;
  font-family: inherit;
  cursor: pointer;
  appearance: none;
}

button:disabled {
  opacity: 0.25;
  cursor: not-allowed;
} 
    </style>
  <script>
    const text = "Schedule.  **Class Location:** Dinneen Hall, G36. **Term Dates:** Wednesday, August 28 – Tuesday, December 17, 2024 (16~ weeks). **Class Times:** Monday, Wednesday, Thursday at 11:00am–11:50am (42 class sessions)| Week |         Start Date          |                 Topics                  ||:-----:|:----------------------:|:---------------------------------------:||  1 |  August 26      | WELCOME!! Code of Ethics in Data Science the Jesuit Way ||  2 |  September 2    | Multi-disciplinary Data Scientist thru an Equity Lens ||  3 |  September 8    | Data Analysis Life Cycle: Visit Admissions Program ||  4 |  September 15   | Database Meaning and Interconnectedness in All Things: Visit Athletic Program || 5 |  September 22   | Decision Modeling and Discernment: Visit Career Engagement and Experiential Learning Program || 6 |  September 29   | Midterm Exam: Visit Criminal Justice Program || 7 |  October 6      | R Analytics and Global Studies: Visit Fine Arts - Music Program || 8 |  October 13     | Data Python and Human Communication: Visit English Program || 9 |  October 20     | Natural Language Processing: Visit Political Science and Communications Program || 10 |  October 27     | Cultural Analytics: Data Dissemination Specialist from the Census Bureau || 11 |  November 3     | Data Visualization and Business Intelligence: High School Leadership Mentor Program || 12 |  November 10    | Data Storytelling and Sustainability: Visit Fine Arts - Graphic Design Program|| 13 |  November 17    | Machine Learning and Marginalized Communities: Visit Data Science Institute Program || 14 |  November 24    | Final Exam Overview and Ethic Principles|| 15 |  December 1     | Term Group Project: Echos of Insight Podcast || 16 |  December 8     | CELEBRATION!! Term Group Project Presentation || 17 |  December 17 (12:00pm - 2:30pm)    | Final Exam - Mock Job Interview |Chat Hours: Monday 10:00am – 10:50am Wednesday 4:00pm - 6:00 pm Thursday 2:00 pm – 4:00 pm Book a Time to Chat Office Location: Dinneen Hall, G-33 E-mail: gguerrero@saintpeters.edu"

// grab the UI elements to work with
const textEl = document.getElementById('text');
const playEl = document.getElementById('play');
const pauseEl = document.getElementById('pause');
const stopEl = document.getElementById('stop');

// add UI event handlers
playEl.addEventListener('click', play);
pauseEl.addEventListener('click', pause);
stopEl.addEventListener('click', stop);

// set text
textEl.innerHTML = text;

function play() {
  if (window.speechSynthesis.speaking) {
    // there's an unfinished utterance
    window.speechSynthesis.resume();
  } else {
    // start new utterance
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.addEventListener('start', handleStart);
    utterance.addEventListener('pause', handlePause);
    utterance.addEventListener('resume', handleResume);
    utterance.addEventListener('end', handleEnd);
    utterance.addEventListener('boundary', handleBoundary);
    window.speechSynthesis.speak(utterance);
  }
}

function pause() {
  window.speechSynthesis.pause();
}

function stop() {
  window.speechSynthesis.cancel();
  
  // Safari doesn't fire the 'end' event when cancelling, so call handler manually
  handleEnd();
}

function handleStart() {
  playEl.disabled = true;
  pauseEl.disabled = false;
  stopEl.disabled = false;
}

function handlePause() {
  playEl.disabled = false;
  pauseEl.disabled = true;
  stopEl.disabled = false;
}

function handleResume() {
  playEl.disabled = true;
  pauseEl.disabled = false;
  stopEl.disabled = false;
}

function handleEnd() {
  playEl.disabled = false;
  pauseEl.disabled = true;
  stopEl.disabled = true;
  
  // reset text to remove mark
  textEl.innerHTML = text;
}

function handleBoundary(event) {
  if (event.name === 'sentence') {
    // we only care about word boundaries
    return;
  }

  const wordStart = event.charIndex;

  let wordLength = event.charLength;
  if (wordLength === undefined) {
    // Safari doesn't provide charLength, so fall back to a regex to find the current word and its length (probably misses some edge cases, but good enough for this demo)
    const match = text.substring(wordStart).match(/^[a-z\d']*/i);
    wordLength = match[0].length;
  }
  
  // wrap word in <mark> tag
  const wordEnd = wordStart + wordLength;
  const word = text.substring(wordStart, wordEnd);
  const markedText = text.substring(0, wordStart) + '<mark>' + word + '</mark>' + text.substring(wordEnd);
  textEl.innerHTML = markedText;
}
  </script>
</body>
</html>


